(this["webpackJsonpreact_people-table-advanced"]=this["webpackJsonpreact_people-table-advanced"]||[]).push([[0],{39:function(e,t,n){},40:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var c=n(26),r=n(8),a=(n(36),n(37),n(3)),s=n(10),l=n.n(s),i=n(1),o=function(e){var t=e.isActive;return l()("navbar-item",{"has-background-grey-lighter":t})},j=function(){return Object(i.jsx)("nav",{"data-cy":"nav",className:"navbar is-fixed-top has-shadow",role:"navigation","aria-label":"main navigation",children:Object(i.jsx)("div",{className:"container",children:Object(i.jsxs)("div",{className:"navbar-brand",children:[Object(i.jsx)(r.c,{className:o,to:"/",children:"Home"}),Object(i.jsx)(r.c,{className:o,to:"people",children:"People"})]})})})},d=function(){return Object(i.jsx)("section",{className:"container",children:Object(i.jsx)("h1",{className:"title",children:"Home Page"})})},u=function(){return Object(i.jsx)("h1",{className:"title",children:"Page not found"})},b=n(0),h=n(4),p=n(6),O=n(5),m="https://mate-academy.github.io/react_people-table/api/people.json";function x(e){return new Promise((function(t){return setTimeout(t,e)}))}function f(){return v.apply(this,arguments)}function v(){return(v=Object(p.a)(Object(h.a)().mark((function e(){return Object(h.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",x(500).then((function(){return fetch(m)})).then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var g=function(e){return e.Name="name",e.Sex="sex",e.Born="born",e.Died="died",e}({}),N={preparedPeople:[],isLoading:!1,errorMessage:"Something went wrong"},y=Object(b.createContext)(N),w=function(e){var t,n,c,s,l,o=e.children,j=Object(r.d)(),d=Object(O.a)(j,1)[0],u=null!==(t=d.get("sex"))&&void 0!==t?t:"",m=null!==(n=d.get("query"))&&void 0!==n?n:"",x=null!==(c=d.getAll("centuries"))&&void 0!==c?c:[],v=null!==(s=d.get("sort"))&&void 0!==s?s:"",N=null!==(l=d.get("order"))&&void 0!==l?l:"",w=Object(b.useState)([]),P=Object(O.a)(w,2),k=P[0],L=P[1],S=Object(b.useState)(!1),C=Object(O.a)(S,2),F=C[0],M=C[1],A=Object(b.useState)(""),B=Object(O.a)(A,2),q=B[0],E=B[1],_=function(e,t){var n=t.sexParam,c=t.queryParam,r=t.centuriesParam,a=t.sortBy,s=t.orderBy;if(!n&&!c&&!r.length&&!a)return e;var l=e,i=c.toLowerCase().trim();return l=l.filter((function(e){var t=e.born,a=e.sex,s=e.name,l=e.motherName,o=e.fatherName,j="".concat(Math.ceil(t/100)),d=!n||a===n,u=!c||s.toLowerCase().includes(i)||(null===l||void 0===l?void 0:l.toLowerCase().includes(i))||(null===o||void 0===o?void 0:o.toLowerCase().includes(i)),b=!r.length||r.includes(j);return d&&u&&b})),a&&l.sort((function(e,t){switch(a){case g.Name:case g.Sex:return e[a].localeCompare(t[a]);case g.Born:case g.Died:return e[a]-t[a];default:return 0}})),s&&l.reverse(),l}(k,{sexParam:u,queryParam:m,centuriesParam:x,sortBy:v,orderBy:N}),D=Object(a.m)().pathname.includes("/people");Object(b.useEffect)((function(){Object(p.a)(Object(h.a)().mark((function e(){var t;return Object(h.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(M(!0),D){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,f();case 6:t=e.sent,L(t),M(!1),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(3),console.warn(e.t0),E("Something went wrong"),M(!1);case 16:case"end":return e.stop()}}),e,null,[[3,11]])})))()}),[D]);var I=Object(b.useMemo)((function(){return{preparedPeople:_,isLoading:F,errorMessage:q}}),[_,F,q]);return Object(i.jsx)(y.Provider,{value:I,children:o})},P=n(9),k=n(24),L=n(27);function S(e,t){var n=new URLSearchParams(e.toString());return Object.entries(t).forEach((function(e){var t=Object(O.a)(e,2),c=t[0],r=t[1];null===r?n.delete(c):Array.isArray(r)?(n.delete(c),r.forEach((function(e){n.append(c,e)}))):n.set(c,r)})),n.toString()}var C=["children","params"],F=function(e){var t=e.children,n=e.params,c=Object(L.a)(e,C),a=Object(r.d)(),s=Object(O.a)(a,1)[0];return Object(i.jsx)(r.b,Object(k.a)(Object(k.a)({to:{search:S(s,n)}},c),{},{children:t}))},M=function(e){return e.Male="m",e.Female="f",e}(M||{}),A=["16","17","18","19","20"],B=function(e,t){return l()({"is-active":e===t})},q=function(e,t){return l()("button","mr-1",{"is-info":t.includes(e)})},E=function(){var e,t,n=Object(r.d)(),c=Object(O.a)(n,2),a=c[0],s=c[1],o=a.get("sex"),j=null!==(e=a.get("query"))&&void 0!==e?e:"",d=null!==(t=a.getAll("centuries"))&&void 0!==t?t:[],u=function(e){return d.includes(e)?d.filter((function(t){return t!==e})):[].concat(Object(P.a)(d),[e])};return Object(i.jsxs)("nav",{className:"panel",children:[Object(i.jsx)("p",{className:"panel-heading",children:"Filters"}),Object(i.jsxs)("p",{className:"panel-tabs","data-cy":"SexFilter",children:[Object(i.jsx)(F,{params:{sex:null},className:B(null,o),children:"All"}),Object(i.jsx)(F,{params:{sex:M.Male},className:B(M.Male,o),children:"Male"}),Object(i.jsx)(F,{params:{sex:M.Female},className:B(M.Female,o),children:"Female"})]}),Object(i.jsx)("div",{className:"panel-block",children:Object(i.jsxs)("p",{className:"control has-icons-left",children:[Object(i.jsx)("input",{"data-cy":"NameFilter",type:"search",className:"input",value:j,onChange:function(e){!function(e){var t=S(a,e);s(t)}({query:e.target.value||null})},placeholder:"Search"}),Object(i.jsx)("span",{className:"icon is-left",children:Object(i.jsx)("i",{className:"fas fa-search","aria-hidden":"true"})})]})}),Object(i.jsx)("div",{className:"panel-block",children:Object(i.jsxs)("div",{className:"level is-flex-grow-1 is-mobile","data-cy":"CenturyFilter",children:[Object(i.jsx)("div",{className:"level-left",children:A.map((function(e){return Object(i.jsx)(F,{"data-cy":"century",className:q(e,d),params:{centuries:u(e)},children:e},e)}))}),Object(i.jsx)("div",{className:"level-right ml-4",children:Object(i.jsx)(F,{"data-cy":"centuryALL",className:l()("button","is-success",{"is-outlined":d.length}),params:{centuries:[]},children:"All"})})]})}),Object(i.jsx)("div",{className:"panel-block",children:Object(i.jsx)(F,{"data-cy":"centuryALL",className:"button is-link is-outlined is-fullwidth",params:{centuries:[],query:null,sex:null},children:"Reset all filters"})})]})},_=function(e){return e.Female="f",e}(_||{}),D=function(e){var t=e.person,n=e.people,c=t.name,s=t.sex,o=t.born,j=t.died,d=t.slug,u=t.motherName,b=t.fatherName,h=Object(a.q)().peopleId,p=n.find((function(e){return e.name===u})),O=n.find((function(e){return e.name===b}));return Object(i.jsxs)("tr",{"data-cy":"person",className:l()({"has-background-warning":h===d}),children:[Object(i.jsx)("td",{children:Object(i.jsx)(r.b,{to:"/people/".concat(d),className:l()({"has-text-danger":s===_.Female}),children:c})}),Object(i.jsx)("td",{children:s}),Object(i.jsx)("td",{children:o}),Object(i.jsx)("td",{children:j}),Object(i.jsx)("td",{children:p?Object(i.jsx)(r.b,{className:"has-text-danger",to:"/people/".concat(null===p||void 0===p?void 0:p.slug),children:u}):u||"-"}),Object(i.jsx)("td",{children:O?Object(i.jsx)(r.b,{to:"/people/".concat(null===O||void 0===O?void 0:O.slug),children:b}):b||"-"})]})},I=function(){var e=Object(b.useContext)(y).preparedPeople;return Object(i.jsx)(i.Fragment,{children:e.map((function(t){return Object(i.jsx)(D,{people:e,person:t},t.slug)}))})},R=function(e,t,n){return n===e&&t?"fa-sort-down":n===e?"fa-sort-up":"fa-sort"},T=function(e,t,n){return t!==e?{sort:e,order:null}:n?{sort:null,order:null}:{sort:e,order:"desc"}},z=[g.Name,g.Sex,g.Born,g.Died],H=function(){var e,t,n=Object(r.d)(),c=Object(O.a)(n,1)[0],a=null!==(e=c.get("sort"))&&void 0!==e?e:"",s=null!==(t=c.get("order"))&&void 0!==t?t:"";return Object(i.jsxs)("table",{"data-cy":"peopleTable",className:"table is-striped is-hoverable is-narrow is-fullwidth",children:[Object(i.jsx)("thead",{children:Object(i.jsxs)("tr",{children:[z.map((function(e){return Object(i.jsx)("th",{children:Object(i.jsxs)("span",{className:"is-flex is-flex-wrap-nowrap",children:[e.toCapitalize(),Object(i.jsx)(F,{params:T(e,a,s),children:Object(i.jsx)("span",{className:"icon",children:Object(i.jsx)("i",{className:l()("fas",R(e,s,a))})})})]})},e)})),Object(i.jsx)("th",{children:"Mother"}),Object(i.jsx)("th",{children:"Father"})]})}),Object(i.jsx)("tbody",{children:Object(i.jsx)(I,{})})]})},J=(n(39),function(){return Object(i.jsx)("div",{className:"Loader","data-cy":"loader",children:Object(i.jsx)("div",{className:"Loader__content"})})}),U=function(){var e=Object(b.useContext)(y),t=e.errorMessage,n=e.isLoading,c=e.preparedPeople,r=!t&&!n;return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("h1",{className:"title container",children:"People Page"}),Object(i.jsx)("div",{className:"block container",children:Object(i.jsxs)("div",{className:"columns is-desktop is-flex-direction-row-reverse",children:[Object(i.jsx)("div",{className:"column is-7-tablet is-narrow-desktop",children:r&&Object(i.jsx)(E,{})}),Object(i.jsx)("div",{className:"column",children:Object(i.jsxs)("div",{className:"box table-container",children:[n&&Object(i.jsx)(J,{}),r&&!!c.length&&Object(i.jsx)(H,{}),r&&!c.length&&Object(i.jsx)("p",{"data-cy":"noPeopleMessage",children:"There are no people on the server"}),t&&Object(i.jsx)("p",{"data-cy":"peopleLoadingError",className:"has-text-danger",children:t})]})})]})})]})};n(40);String.prototype.toCapitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)};var G=function(){return Object(i.jsxs)("div",{"data-cy":"app",children:[Object(i.jsx)(j,{}),Object(i.jsx)("div",{className:"section",children:Object(i.jsxs)(a.d,{children:[Object(i.jsx)(a.b,{path:"/",element:Object(i.jsx)(d,{})}),Object(i.jsxs)(a.b,{path:"people",children:[Object(i.jsx)(a.b,{index:!0,element:Object(i.jsx)(U,{})}),Object(i.jsx)(a.b,{path:":peopleId",element:Object(i.jsx)(U,{})})]}),Object(i.jsx)(a.b,{path:"home",element:Object(i.jsx)(a.a,{to:"/",replace:!0})}),Object(i.jsx)(a.b,{path:"*",element:Object(i.jsx)(u,{})})]})})]})};Object(c.createRoot)(document.getElementById("root")).render(Object(i.jsx)(r.a,{children:Object(i.jsx)(w,{children:Object(i.jsx)(G,{})})}))}},[[41,1,2]]]);
//# sourceMappingURL=main.fc7f2cc6.chunk.js.map