(this["webpackJsonpreact_people-table-advanced"]=this["webpackJsonpreact_people-table-advanced"]||[]).push([[0],{39:function(e,t,n){},40:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var c=n(26),a=n(8),r=(n(36),n(37),n(3)),s=n(10),l=n.n(s),i=n(1),o=function(e){var t=e.isActive;return l()("navbar-item",{"has-background-grey-lighter":t})},j=function(){return Object(i.jsx)("nav",{"data-cy":"nav",className:"navbar is-fixed-top has-shadow",role:"navigation","aria-label":"main navigation",children:Object(i.jsx)("div",{className:"container",children:Object(i.jsxs)("div",{className:"navbar-brand",children:[Object(i.jsx)(a.c,{className:o,to:"/",children:"Home"}),Object(i.jsx)(a.c,{className:o,to:"people",children:"People"})]})})})},d=function(){return Object(i.jsx)("section",{className:"container",children:Object(i.jsx)("h1",{className:"title",children:"Home Page"})})},u=function(){return Object(i.jsx)("h1",{className:"title",children:"Page not found"})},b=n(0),h=n(4),p=n(6),O=n(5),x="https://mate-academy.github.io/react_people-table/api/people.json";function m(e){return new Promise((function(t){return setTimeout(t,e)}))}function f(){return v.apply(this,arguments)}function v(){return(v=Object(p.a)(Object(h.a)().mark((function e(){return Object(h.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",m(500).then((function(){return fetch(x)})).then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var g={people:[],isLoading:!1,errorMessage:"Something went wrong"},N=Object(b.createContext)(g),y=function(e){var t=e.children,n=Object(b.useState)([]),c=Object(O.a)(n,2),a=c[0],s=c[1],l=Object(b.useState)(!1),o=Object(O.a)(l,2),j=o[0],d=o[1],u=Object(b.useState)(""),x=Object(O.a)(u,2),m=x[0],v=x[1],g=Object(r.m)().pathname.includes("/people");Object(b.useEffect)((function(){Object(p.a)(Object(h.a)().mark((function e(){var t;return Object(h.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(d(!0),g){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,f();case 6:t=e.sent,s(t),d(!1),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(3),console.warn(e.t0),v("Something went wrong"),d(!1);case 16:case"end":return e.stop()}}),e,null,[[3,11]])})))()}),[g]);var y=Object(b.useMemo)((function(){return{people:a,isLoading:j,errorMessage:m}}),[a,j,m]);return Object(i.jsx)(N.Provider,{value:y,children:t})},w=n(9),k=n(24),L=n(27);function P(e,t){var n=new URLSearchParams(e.toString());return Object.entries(t).forEach((function(e){var t=Object(O.a)(e,2),c=t[0],a=t[1];null===a?n.delete(c):Array.isArray(a)?(n.delete(c),a.forEach((function(e){n.append(c,e)}))):n.set(c,a)})),n.toString()}var S=["children","params"],C=function(e){var t=e.children,n=e.params,c=Object(L.a)(e,S),r=Object(a.d)(),s=Object(O.a)(r,1)[0];return Object(i.jsx)(a.b,Object(k.a)(Object(k.a)({to:{search:P(s,n)}},c),{},{children:t}))},M=function(e){return e.Male="m",e.Female="f",e}(M||{}),F=["16","17","18","19","20"],A=function(){var e,t,n=Object(a.d)(),c=Object(O.a)(n,2),r=c[0],s=c[1],o=r.get("sex"),j=null!==(e=r.get("query"))&&void 0!==e?e:"",d=null!==(t=r.getAll("centuries"))&&void 0!==t?t:[],u=function(e){return l()({"is-active":e===o})},b=function(e){return l()("button","mr-1",{"is-info":d.includes(e)})},h=function(e){return d.includes(e)?d.filter((function(t){return t!==e})):[].concat(Object(w.a)(d),[e])};return Object(i.jsxs)("nav",{className:"panel",children:[Object(i.jsx)("p",{className:"panel-heading",children:"Filters"}),Object(i.jsxs)("p",{className:"panel-tabs","data-cy":"SexFilter",children:[Object(i.jsx)(C,{params:{sex:null},className:u(null),children:"All"}),Object(i.jsx)(C,{params:{sex:M.Male},className:u(M.Male),children:"Male"}),Object(i.jsx)(C,{params:{sex:M.Female},className:u(M.Female),children:"Female"})]}),Object(i.jsx)("div",{className:"panel-block",children:Object(i.jsxs)("p",{className:"control has-icons-left",children:[Object(i.jsx)("input",{"data-cy":"NameFilter",type:"search",className:"input",value:j,onChange:function(e){!function(e){var t=P(r,e);s(t)}({query:e.target.value||null})},placeholder:"Search"}),Object(i.jsx)("span",{className:"icon is-left",children:Object(i.jsx)("i",{className:"fas fa-search","aria-hidden":"true"})})]})}),Object(i.jsx)("div",{className:"panel-block",children:Object(i.jsxs)("div",{className:"level is-flex-grow-1 is-mobile","data-cy":"CenturyFilter",children:[Object(i.jsx)("div",{className:"level-left",children:F.map((function(e){return Object(i.jsx)(C,{"data-cy":"century",className:b(e),params:{centuries:h(e)},children:e},e)}))}),Object(i.jsx)("div",{className:"level-right ml-4",children:Object(i.jsx)(C,{"data-cy":"centuryALL",className:l()("button","is-success",{"is-outlined":d.length}),params:{centuries:[]},children:"All"})})]})}),Object(i.jsx)("div",{className:"panel-block",children:Object(i.jsx)(C,{"data-cy":"centuryALL",className:"button is-link is-outlined is-fullwidth",params:{centuries:[],query:null,sex:null},children:"Reset all filters"})})]})},B=function(e){return e.Name="name",e.Sex="sex",e.Born="born",e.Died="died",e}({}),q=function(e){var t=e.person,n=e.people,c=t.name,s=t.sex,o=t.born,j=t.died,d=t.slug,u=t.motherName,b=t.fatherName,h=Object(r.q)().peopleId,p=n.find((function(e){return e.name===u})),O=n.find((function(e){return e.name===b}));return Object(i.jsxs)("tr",{"data-cy":"person",className:l()({"has-background-warning":h===d}),children:[Object(i.jsx)("td",{children:Object(i.jsx)(a.b,{to:"/people/".concat(d),className:l()({"has-text-danger":"f"===s}),children:c})}),Object(i.jsx)("td",{children:s}),Object(i.jsx)("td",{children:o}),Object(i.jsx)("td",{children:j}),Object(i.jsx)("td",{children:p?Object(i.jsx)(a.b,{className:"has-text-danger",to:"/people/".concat(null===p||void 0===p?void 0:p.slug),children:u}):u||"-"}),Object(i.jsx)("td",{children:O?Object(i.jsx)(a.b,{to:"/people/".concat(null===O||void 0===O?void 0:O.slug),children:b}):b||"-"})]})},E=function(){var e,t,n,c,r,s=Object(b.useContext)(N),l=s.people,o=s.errorMessage,j=Object(a.d)(),d=Object(O.a)(j,1)[0],u=null!==(e=d.get("sex"))&&void 0!==e?e:"",h=null!==(t=d.get("query"))&&void 0!==t?t:"",p=null!==(n=d.getAll("centuries"))&&void 0!==n?n:[],x=null!==(c=d.get("sort"))&&void 0!==c?c:"",m=null!==(r=d.get("order"))&&void 0!==r?r:"",f=function(e,t){var n=t.sexParam,c=t.queryParam,a=t.centuriesParam,r=t.sortBy,s=t.orderBy;if(!n&&!c&&!a.length&&!r)return e;var l=e,i=c.toLowerCase().trim();return l=l.filter((function(e){var t=e.born,r=e.sex,s=e.name,l=e.motherName,o=e.fatherName,j="".concat(Math.ceil(t/100)),d=!n||r===n,u=!c||s.toLowerCase().includes(i)||(null===l||void 0===l?void 0:l.toLowerCase().includes(i))||(null===o||void 0===o?void 0:o.toLowerCase().includes(i)),b=!a.length||a.includes(j);return d&&u&&b})),r&&l.sort((function(e,t){switch(r){case B.Name:case B.Sex:return e[r].localeCompare(t[r]);case B.Born:case B.Died:return e[r]-t[r];default:return 0}})),s&&l.reverse(),l}(l,{sexParam:u,queryParam:h,centuriesParam:p,sortBy:x,orderBy:m});return Object(i.jsx)(i.Fragment,{children:0!==f.length?f.map((function(e){return Object(i.jsx)(q,{people:l,person:e},e.slug)})):!o&&Object(i.jsx)("tr",{children:Object(i.jsx)("th",{"data-cy":"noPeopleMessage",children:"There are no people on the server"})})})},_=[B.Name,B.Sex,B.Born,B.Died],D=function(){var e,t,n=Object(a.d)(),c=Object(O.a)(n,1)[0],r=null!==(e=c.get("sort"))&&void 0!==e?e:"",s=null!==(t=c.get("order"))&&void 0!==t?t:"";return Object(i.jsxs)("table",{"data-cy":"peopleTable",className:"table is-striped is-hoverable is-narrow is-fullwidth",children:[Object(i.jsx)("thead",{children:Object(i.jsxs)("tr",{children:[_.map((function(e){return Object(i.jsx)("th",{children:Object(i.jsxs)("span",{className:"is-flex is-flex-wrap-nowrap",children:[e.toCapitalize(),Object(i.jsx)(C,{params:(n=e,r!==n?{sort:n,order:null}:s?{sort:null,order:null}:{sort:n,order:"desc"}),children:Object(i.jsx)("span",{className:"icon",children:Object(i.jsx)("i",{className:"fas ".concat((t=e,r===t&&s?"fa-sort-down":r===t?"fa-sort-up":"fa-sort"))})})})]})});var t,n})),Object(i.jsx)("th",{children:"Mother"}),Object(i.jsx)("th",{children:"Father"})]})}),Object(i.jsx)("tbody",{children:Object(i.jsx)(E,{})})]})},I=(n(39),function(){return Object(i.jsx)("div",{className:"Loader","data-cy":"loader",children:Object(i.jsx)("div",{className:"Loader__content"})})}),R=function(){var e=Object(b.useContext)(N),t=e.errorMessage,n=e.isLoading,c=!t&&!n;return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("h1",{className:"title container",children:"People Page"}),Object(i.jsx)("div",{className:"block container",children:Object(i.jsxs)("div",{className:"columns is-desktop is-flex-direction-row-reverse",children:[Object(i.jsx)("div",{className:"column is-7-tablet is-narrow-desktop",children:c&&Object(i.jsx)(A,{})}),Object(i.jsx)("div",{className:"column",children:Object(i.jsxs)("div",{className:"box table-container",children:[n&&Object(i.jsx)(I,{}),!n&&Object(i.jsx)(D,{}),t&&Object(i.jsx)("p",{"data-cy":"peopleLoadingError",className:"has-text-danger",children:t})]})})]})})]})};n(40);String.prototype.toCapitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)};var T=function(){return Object(i.jsxs)("div",{"data-cy":"app",children:[Object(i.jsx)(j,{}),Object(i.jsx)("div",{className:"section",children:Object(i.jsxs)(r.d,{children:[Object(i.jsx)(r.b,{path:"/",element:Object(i.jsx)(d,{})}),Object(i.jsxs)(r.b,{path:"people",children:[Object(i.jsx)(r.b,{index:!0,element:Object(i.jsx)(R,{})}),Object(i.jsx)(r.b,{path:":peopleId",element:Object(i.jsx)(R,{})})]}),Object(i.jsx)(r.b,{path:"home",element:Object(i.jsx)(r.a,{to:"/",replace:!0})}),Object(i.jsx)(r.b,{path:"*",element:Object(i.jsx)(u,{})})]})})]})};Object(c.createRoot)(document.getElementById("root")).render(Object(i.jsx)(a.a,{children:Object(i.jsx)(y,{children:Object(i.jsx)(T,{})})}))}},[[41,1,2]]]);
//# sourceMappingURL=main.bae6049a.chunk.js.map